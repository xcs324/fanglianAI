# fanglianAI 用户指南

一个为 Minecraft Paper 服务器提供的 AI 对话插件，让玩家可以在游戏内与 AI 交流。

---

## 快速开始

安装插件后，直接使用命令向 AI 提问：

```
/flai 如何制作钻石镐？
```

或使用 MC 专家模式获得更专业的 Minecraft 回答：

```
/flai mc 钻石镐怎么合成？
```

---

## 两种对话模式

插件提供两种独立的对话模式，各自拥有独立的上下文记忆：

### 普通模式 `/flai <问题>`

通用问答模式，适合日常问题、翻译、编程等非 Minecraft 专业问题。

**特点：**
- 通用 AI 助手
- 独立的上下文记忆
- 不会与 MC 专家模式混淆

**示例：**
```
/flai 今天天气怎么样？
/flai 帮我写一段 Python 代码
/flai 什么是量子力学？
```

### MC 专家模式 `/flai mc <问题>`

专注于 Minecraft 游戏问题的专家模式，对游戏机制有更深入的了解。

**特点：**
- Minecraft 专业回答
- 独立的上下文记忆
- 答案更精准、更贴合游戏

**示例：**
```
/flai mc 钻石矿在哪里能找到？
/flai mc 最好的附魔组合是什么？
/flai mc 如何建造刷铁机？
```

---

## 命令列表

### 基础命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `/flai <问题>` | 普通模式向 AI 提问 | `/flai 什么是人工智能？` |
| `/flai mc <问题>` | MC 专家模式提问 | `/flai mc 如何找到末地要塞？` |
| `/flai clear` | 清除所有对话历史 | `/flai clear` |
| `/flai help` | 显示帮助信息 | `/flai help` |

### 查询命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `/flai token` | 查看今日 Token 使用量 | `/flai token` |
| `/flai list` | 查看可用命令 | `/flai list` |
| `/flai model` | 查看当前使用的模型 | `/flai model` |
| `/flai models` | 查看可切换的模型列表 | `/flai models` |

### 设置命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `/flai model <模型名>` | 切换 AI 模型 | `/flai model deepseek-r1` |
| `/flai private` | 切换私聊/公共模式 | `/flai private` |

### 管理命令

| 命令 | 说明 | 权限 |
|------|------|------|
| `/flai reload` | 重载配置文件 | 仅管理员 |

### 预设命令

| 命令 | 说明 | 示例 |
|------|------|------|
| `/flai translate <内容>` | 中英互译 | `/flai translate Hello World` |

---

## 对话上下文

插件支持上下文记忆，AI 能记住你之前的对话内容。**普通模式和 MC 专家模式有独立的上下文记忆**，互不影响。

### 示例对话（MC 专家模式）

```
玩家: /flai mc 钻石矿在哪里能找到？
AI:   钻石矿在 Y=-64 到 Y=16 之间生成，最佳挖掘高度是 Y=-59...

玩家: /flai mc 用什么工具挖最快？
AI:   使用铁镐或更高级的镐子挖掘钻石矿最快，钻石矿需要铁镐及以上才能掉落...
```

AI 会记住上下文，所以第二个问题不需要再提"钻石矿"。

### 示例对话（普通模式）

```
玩家: /flai 什么是递归？
AI:   递归是一种编程技巧，函数调用自身来解决问题...

玩家: /flai 能给我一个例子吗？
AI:   当然！这是一个经典的阶乘递归例子...
```

### 清除对话历史

如果想让 AI 忘记之前的对话（两个模式的历史都会清除）：

```
/flai clear
```

---

## 私聊模式

AI 的回复有两种显示方式：

- **私聊模式**：只有你能看到 AI 的回复
- **公共模式**：全服玩家都能看到你的问题和 AI 的回复

### 切换方式

```
/flai private
```

每次切换会显示当前状态：
- `§a已切换到私聊模式。`
- `§a已切换到公共聊天模式。`

---

## 使用限制

### 冷却时间

每次提问后需要等待一定时间（默认 15 秒）才能再次提问，防止刷屏。

提示信息：`§c请等待 XX 秒后再试。`

**绕过方式**：管理员（OP）不受冷却时间限制。

### Token 限制

每个玩家每日有 Token 使用量限制（默认 20000），达到上限后需等待次日 0 点自动重置。

查看使用量：
```
/flai token
```
显示：`§e今日 Token 使用情况: §a500§e/§c20000`

**绕过方式**：管理员（OP）不受 Token 限制。

---

## 模型切换

服务器可能配置了多个 AI 模型，你可以选择适合自己的模型。

### 查看可用模型

```
/flai models
```

### 切换模型

```
/flai model deepseek-r1
```

### 常见模型特点

| 模型 | 特点 |
|------|------|
| `deepseek-v3.2` | 综合能力强，适合一般问答 |
| `deepseek-r1` | 深度推理模型，适合复杂问题 |
| `qwen3-max` | 阿里通义千问，中文能力强 |
| `qwen3-coder-plus` | 代码专家，适合编程问题 |
| `qwen3-vl-plus` | 多模态模型，支持图像理解 |
| `kimi-k2` | Moonshot AI，长文本处理 |
| `iflow-rome-30ba3b` | iFlow 自研模型 |

---

## 权限说明

| 权限 | 说明 | 获取方式 |
|------|------|----------|
| `fanglianai.use` | 使用 AI 对话 | 所有玩家 |
| `fanglianai.token` | 查询使用量 | 所有玩家 |
| `fanglianai.private` | 切换私聊模式 | 所有玩家 |
| `fanglianai.reload` | 重载配置 | 仅管理员 |
| `fanglianai.bypass.limit` | 绕过 Token 限制 | 仅管理员 |
| `fanglianai.bypass.cooldown` | 绕过冷却时间 | 仅管理员 |

---

## 常见问题

### Q: 普通模式和 MC 专家模式有什么区别？

- **普通模式**：通用 AI 助手，适合日常问题
- **MC 专家模式**：专注于 Minecraft，回答更专业

两种模式有独立的上下文记忆，互不影响。

### Q: AI 回复太慢怎么办？

AI 需要思考时间，请耐心等待。显示 `§e正在思考中...` 表示正在处理。

### Q: 提示"今日 Token 使用量已达上限"

你今天的 AI 使用额度已用完，每日 0 点自动重置。或者联系管理员提升额度。

### Q: 提示"请等待 XX 秒后再试"

你提问太快了，请等待冷却时间结束后再试。

### Q: 想让全服看到我的问题怎么办？

使用 `/flai private` 切换到公共模式，你的问题和 AI 回复将广播给全服玩家。

### Q: AI 回答不准确怎么办？

- 尝试换一种问法
- 使用 MC 专家模式获得更专业的回答
- 切换到更适合的模型（如 deepseek-r1 处理复杂问题）

---

## 命令别名

`/flai` 命令也可以简写为 `/ai`：

```
/ai 如何制作铁傀儡？
/ai mc 钻石镐怎么合成？
```

---

## 小贴士

1. **选择正确的模式**：Minecraft 问题用 `/flai mc`，其他问题用 `/flai`
2. **提问技巧**：问题越具体，回答越准确
3. **多轮对话**：利用上下文记忆，可以逐步深入提问
4. **模型选择**：复杂问题选 `deepseek-r1`，日常对话选 `deepseek-v3.2`

---

*插件版本: 1.10 | 适用于 Paper 1.20.4+*